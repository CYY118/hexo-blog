"use strict";(self.webpackChunkarco_design_pro=self.webpackChunkarco_design_pro||[]).push([[999],{50598:function(e,t,n){var r,a=n(4519);function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}t.Z=function(e){return a.createElement("svg",o({className:"sort_svg__icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:12,height:12},e),r||(r=a.createElement("path",{d:"M438.857 73.143H1024v73.143H438.857zm0 268.434H1024v73.143H438.857zm0 267.703H1024v73.143H438.857zm0 268.434H1024v73.143H438.857zm-24.868-670.72L206.994 0 0 206.994h103.131l67.292-67.291V389.85h73.143V139.703l66.56 67.291h103.863zM0 817.006L206.994 1024 413.99 817.006H310.126l-66.56 67.291V634.15h-73.143v250.148l-67.292-67.291H0z",className:"sort_svg__custom-cursor-on-hover",fill:"#1296db"})))}},49919:function(e,t,n){n.d(t,{Z:function(){return S}});var r=n(42982),a=n(70885),o=(n(43570),n(94294)),i=n(4519),c=n(8965),l=n(24422),u=n(90722),s=n(46138),f=n(69451),g=n(63193),d=n(7538),p=n(63258),h=n(46376),m="editorWrapper--R0P8y",v="markdown--ES7YW",Z="preview--S14hB",E=n(9949),b=n(42374),y=s.Qf.define([{tag:g.pJ.heading1,fontSize:"1.6em",fontWeight:"bold"},{tag:g.pJ.heading2,fontSize:"1.4em",fontWeight:"bold"},{tag:g.pJ.heading3,fontSize:"1.2em",fontWeight:"bold"}]),k=o.Z.Row,w=o.Z.Col;var S=function(e){var t=e.initialValue,n=(e.adminSettings,e.handleChangeContent),o=e.enableAutoStroll,g=e.forceLineNumbers,S=(0,i.useRef)(null),M=(0,i.useRef)(null),C=(0,i.useRef)(null),x=(0,i.useState)(""),H=(0,a.Z)(x,2),_=H[0],P=H[1],z=(0,i.useState)(""),O=(0,a.Z)(z,2),R=O[0],F=O[1],L=function(e){if(o){var t=C.current,n=t.getBoundingClientRect().height;t.scrollTop=(t.scrollHeight-n)*e}};function A(e,t){return new Promise((function(n,r){h.ZP.post("/hexopro/api/images/upload",{data:e,filename:t}).then((function(e){n(e.data)}))}))}var T=(0,i.useState)(null),j=(0,a.Z)(T,2),W=j[0],B=j[1],N=(0,i.useState)(null),X=(0,a.Z)(N,2),D=X[0],V=X[1],U=(0,i.useState)(null),J=(0,a.Z)(U,2),I=J[0],Q=J[1];return(0,i.useEffect)((function(){if(S){var e=new f.F6,a=new f.F6,i=f.yy.create({doc:t,extensions:[l.tk.lineWrapping,d.sy,l.$f.of([].concat((0,r.Z)(p.wQ),[{key:"Tab",preventDefault:!0,run:p.at},{key:"Shift-Tab",preventDefault:!0,run:p.xi}])),e.of([(0,l.Eu)(),c.Xy,l.tk.lineWrapping]),(0,l.ZO)(),(0,l.HQ)(),(0,s.nF)(y),(0,u.JH)({base:u.eg}),l.tk.updateListener.of((function(e){e.docChanged&&(F(e.state.doc.toString()),n(e.state.doc.toString()))})),a.of(l.tk.domEventHandlers({scroll:function(e,t){console.log(o),L(S.current.scrollTop/S.current.scrollHeight)},paste:function(e,t){var n=e.clipboardData.items;if(n.length){for(var r,a=n.length-1;a>=0;a--)if("file"==n[a].kind){r=n[a].getAsFile();break}if(r){var o=new FileReader;o.onload=function(e){A(e.target.result,null).then((function(e){var n=t.state.replaceSelection("\n![".concat(e.msg,"](").concat(e.src,")"));t.update([t.state.update(n)])}))},o.readAsDataURL(r)}}}}))]}),g=new l.tk({parent:S.current,state:i});return B(g),V(e),Q(a),function(){return g.destroy()}}}),[S]),(0,i.useEffect)((function(){W&&D&&(g?W.dispatch({effects:D.reconfigure([(0,l.Eu)(),c.Xy,l.tk.lineWrapping])}):W.dispatch({effects:D.reconfigure([])}))}),[W,g]),(0,i.useEffect)((function(){if(W&&t){var e=W.state.update({changes:{from:0,to:W.state.doc.length,insert:t},selection:W.state.selection});W.dispatch(e)}}),[t,W]),(0,i.useEffect)((function(){var e={code:function(e,t){var n=b.Z.getLanguage(t)?t:"plaintext";return"<pre><code>".concat(b.Z.highlight(e,{language:n}).value,"</code></pre>")}};E.TU.use({renderer:e}),E.TU.use({pedantic:!1,gfm:!0,breaks:!0}),P((0,E.TU)(R))}),[R]),(0,i.useEffect)((function(){if(W){var e=W.state.update({effects:I.reconfigure(l.tk.domEventHandlers({scroll:function(e,t){L(S.current.scrollTop/S.current.scrollHeight)},paste:function(e,t){var n=e.clipboardData.items;if(n.length){for(var r,a=n.length-1;a>=0;a--)if("file"==n[a].kind){r=n[a].getAsFile();break}if(r){var o=new FileReader;o.onload=function(e){A(e.target.result,null).then((function(e){var n=t.state.replaceSelection("\n![".concat(e.msg,"](").concat(e.src,")"));t.update([t.state.update(n)])}))},o.readAsDataURL(r)}}}}))});W.dispatch(e)}}),[W,o]),i.createElement("div",{style:{width:"100%",height:"100vh"}},i.createElement(k,{className:m},i.createElement(w,{id:"markdown",span:12,className:v,ref:S,onMouseEnter:function(){return M.current="markdown"}}),i.createElement(w,{id:"preview",span:12,ref:C,className:Z,style:{overflowY:"scroll"},onMouseEnter:function(){return M.current="preview"},dangerouslySetInnerHTML:{__html:_}})))}},79713:function(e,t,n){n.r(t),n.d(t,{FrontMatterAdder:function(){return p}});var r=n(1413),a=n(70885),o=(n(47872),n(82357)),i=(n(58186),n(3024)),c=(n(35749),n(29413)),l=(n(70198),n(52861)),u=(n(35495),n(79431)),s=(n(63793),n(79721)),f=(n(39340),n(34998)),g=n(4519),d=f.Z.Group;function p(e){var t=e.visible,n=e.onClose,p=e.title,h=e.existFrontMatter,m=e.frontMatter,v=e.onChange,Z=(0,g.useState)(!1),E=(0,a.Z)(Z,2),b=E[0],y=E[1],k=(0,g.useState)(""),w=(0,a.Z)(k,2),S=w[0],M=w[1],C=(0,g.useState)(""),x=(0,a.Z)(C,2),H=x[0],_=x[1];(0,g.useEffect)((function(){y(t)}),[t]);var P=function(){if(0!=S.trim().length){var e=(0,r.Z)({},m);e[S]=H,v(e)}};return b&&g.createElement(o.Z,{title:p,bordered:!0,hoverable:!0,style:{position:"absolute",top:"100%",zIndex:100,width:"100%"},extra:g.createElement(i.Z,null,g.createElement(l.Z,{placeholder:"frontMatter Key",value:S,onChange:function(e){return M(e)},onPressEnter:P}),g.createElement(l.Z,{placeholder:"frontMatter value",value:H,onChange:function(e){return _(e)},onPressEnter:P}),g.createElement(c.Z,{type:"text",onClick:function(){y(!1),n()}},"X"))},function e(){var t=Object.keys(h);return g.createElement(d,{onChange:function(t){var n={};t.forEach((function(t){n[t]=e[t]?e[t]:null})),v(n)},value:Object.keys(m)},t.map((function(e,t){return g.createElement(f.Z,{key:e,value:e},(function(t){var n=t.checked;return g.createElement(u.Z,{key:e,content:m[e]?m[e]:"unset"},g.createElement(s.Z,{key:e,color:n?"purple":"",style:{marginBottom:5}},e))}))})))}())}},65074:function(e,t,n){n.r(t);var r=n(70885),a=(n(45506),n(3358)),o=n(79704),i=(n(84094),n(6438)),c=n(42499),l=n(31672),u=(n(35749),n(29413)),s=(n(43570),n(94294)),f=n(49919),g=n(46376),d=n(4519),p=n(76082),h=(n(86074),n(50598)),m=n(32048),v=n.n(m),Z=n(51002),E=s.Z.Row,b=s.Z.Col,y=u.Z.Group;t.default=function(){var e=(0,p.k6)(),t=(0,d.useRef)(null),n=(0,p.UO)()._id,s=(0,d.useState)({isDraft:!0,source:null}),m=(0,r.Z)(s,2),k=(m[0],m[1]),w=(0,d.useState)({tags:[],categories:[],frontMatter:{},source:""}),S=(0,r.Z)(w,2),M=S[0],C=S[1],x=(0,d.useState)([]),H=(0,r.Z)(x,2),_=(H[0],H[1]),P=(0,d.useState)(""),z=(0,r.Z)(P,2),O=z[0],R=z[1],F=(0,d.useState)(""),L=(0,r.Z)(F,2),A=L[0],T=L[1],j=(0,d.useState)(""),W=(0,r.Z)(j,2),B=(W[0],W[1]),N=(0,d.useState)({}),X=(0,r.Z)(N,2),D=(X[0],X[1]),V=(0,d.useState)(!1),U=(0,r.Z)(V,2),J=U[0],I=U[1],Q=(0,d.useState)(!1),G=(0,r.Z)(Q,2),Y=G[0],$=G[1],K=(0,d.useState)(!1),q=(0,r.Z)(K,2),ee=q[0],te=q[1],ne=function(e){return new Promise((function(t,n){g.Xn.get("/hexopro/api/pages/"+e).then((function(e){t(e.data)})).catch((function(e){n(e)}))}))},re=function(e,t){if("pageMeta"==e)return C(t),void _(Object.keys(t.frontMatter));if("page"==e){var n=t.raw.split("---"),r=""===n[0]?2:1,a=n.slice(r).join("---").trim();T(t.title),B(a),k(t);var o=t._content;R(o)}};return(0,d.useEffect)((function(){var e={page:ne(n),pageMeta:new Promise((function(e,t){g.Xn.get("/hexopro/api/pageMeta/"+n).then((function(t){e(t.data)})).catch((function(e){t(e)}))}))};Object.keys(e).forEach((function(t){Promise.resolve(e[t]).then((function(e){var n={};n[t]=e,D(n),re&&re(t,e)}))}))}),[]),(0,d.useEffect)((function(){var e=v().debounce((function(e){!function(e){new Promise((function(t,r){g.Xn.post("/hexopro/api/pages/"+n,e).then((function(e){t(e.data)})).catch((function(e){r(e)}))}))}(e)}),1e3,{trailing:!0,loading:!0});t.current=e}),[]),d.createElement("div",null,d.createElement(E,{style:{width:"100%",borderBottomColor:"black",borderBottom:"1px solid gray",backgroundColor:"white"},align:"center"},d.createElement(b,{span:12},d.createElement("input",{style:{width:"100%",height:60,border:"none",outline:"none",boxSizing:"border-box",fontSize:28,fontWeight:500,marginLeft:10},value:A,onChange:function(e){var n;(n=e).target.value!=A&&(T(n.target.value),t.current({title:n.target.value}))}})),d.createElement(b,{span:2,offset:9,style:{alignItems:"center",justifyContent:"center",paddingLeft:50}},d.createElement(y,null,d.createElement(u.Z,{type:ee?"outline":"dashed",icon:d.createElement(h.Z,null),onClick:function(){console.log(ee),te(!ee)}}),d.createElement(u.Z,{type:"outline",icon:d.createElement(l.Z,null),onClick:function(){return $(!Y)}}),d.createElement(u.Z,{type:"outline",icon:d.createElement(c.Z,null),onClick:function(){return I(!0)}}))),d.createElement(b,{span:1},d.createElement(a.Z,{focusLock:!0,title:"\u786e\u8ba4\u5220\u9664",content:"\u786e\u8ba4\u5220\u9664\u9875\u9762\u5417?",onOk:function(){i.Z.info({content:"ok"}),new Promise((function(e,t){g.Xn.get("/hexopro/api/pages/"+n+"/remove").then((function(t){e(t.data)})).catch((function(e){t(e)}))})),e.push("/pages")},onCancel:function(){i.Z.error({content:"cancel"})}},d.createElement(u.Z,{type:"secondary",icon:d.createElement(o.Z,null)})))),d.createElement(E,{style:{boxSizing:"border-box",margin:0,backgroundColor:"white",height:"100vh",overflow:"hidden",width:"100%"}},d.createElement(f.Z,{initialValue:O,adminSettings:{editor:{lineNumbers:!0}},handleChangeContent:function(e){t.current({_content:e})},enableAutoStroll:ee,forceLineNumbers:Y})),d.createElement(Z.PageSettings,{visible:J,setVisible:I,pageMeta:M,setPageMeta:C,handleChange:function(e){return new Promise((function(t,r){g.Xn.post("/hexopro/api/pages/"+n,e).then((function(e){t(e.data)})).catch((function(e){r(e)}))}))}}))}},51002:function(e,t,n){n.r(t),n.d(t,{PageSettings:function(){return v}});var r=n(1413),a=n(70885),o=(n(56710),n(86721)),i=(n(70198),n(52861)),c=(n(58186),n(3024)),l=(n(35749),n(29413)),u=(n(35495),n(79431)),s=(n(63793),n(79721)),f=(n(84094),n(6438)),g=(n(43570),n(94294)),d=n(4519),p=n(79713),h=g.Z.Row,m=g.Z.Col;function v(e){var t=e.visible,n=e.setVisible,g=e.pageMeta,v=e.setPageMeta,Z=e.handleChange,E=(0,d.useState)(!1),b=(0,a.Z)(E,2),y=b[0],k=b[1],w=(0,d.useState)([]),S=(0,a.Z)(w,2),M=S[0],C=S[1];return d.createElement(o.Z,{title:d.createElement("div",{style:{textAlign:"left"}},"\u6587\u7ae0\u5c5e\u6027"),visible:t,onCancel:function(){v((0,r.Z)((0,r.Z)({},g),{},{tags:[],categories:[],frontMatter:M})),n(!1)},onOk:function(){var e;e=g.source,/^([a-zA-Z0-9-_\/]+)\/([a-zA-Z0-9-_]+\.md)$/i.test(e)?(n(!1),Z({frontMatter:g.frontMatter,source:g.source})):f.Z.error("\u914d\u7f6e\u7684\u9875\u9762\u8def\u5f84\u975e\u6cd5\u8bf7\u68c0\u67e5\uff01")},afterOpen:function(){C(g.frontMatter)},style:{width:800}},d.createElement(h,{style:{marginTop:15,marginBottom:15}},d.createElement(m,null,d.createElement(c.Z,{style:{width:"100",flexWrap:"wrap"}},Object.keys(g.frontMatter).map((function(e){return d.createElement(u.Z,{key:e,content:g.frontMatter[e]?g.frontMatter[e]:"unset"},d.createElement(s.Z,{closable:!0,onClose:function(){return function(e){var t={};Object.keys(g.frontMatter).forEach((function(n){n!==e&&(t[n]=g.frontMatter[n])}));var n=(0,r.Z)((0,r.Z)({},g),{},{frontMatter:t});v(n)}(e)},key:e,color:"blue",style:{marginBottom:5}},e))})),d.createElement(l.Z,{type:"dashed",onClick:function(){k(!y)}},"+\u81ea\u5b9a\u4e49frontMatter")),d.createElement(p.FrontMatterAdder,{existFrontMatter:M,onClose:function(){k(!1)},visible:y,title:"Font-Matter",frontMatter:g.frontMatter,onChange:function(e){var t=(0,r.Z)((0,r.Z)({},g),{},{frontMatter:e});v(t)}}))),d.createElement(h,{style:{marginTop:15,marginBottom:15}},d.createElement(m,null,d.createElement(i.Z,{style:{width:350},allowClear:!0,placeholder:"\u8bf7\u8f93\u5165\u9875\u9762\u5b58\u653e\u8def\u5f84",value:g.source,onChange:function(e){var t=(0,r.Z)((0,r.Z)({},g),{},{source:e});v(t)}}))))}}}]);
//# sourceMappingURL=999.c86b915f.chunk.js.map